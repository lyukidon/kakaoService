import React,{useState} from 'react';
import PropTypes from 'prop-types';

function Category({ data, onSelect }){
	return(
		<div onClick={onSelect}>
			{data}
		</div>
	);
}

export default ()=>{
	//data
	const [category, setCategory]=useState([
		{
			first:'일반문의',
			second:[
				'안드로이드', 'iOS', '안드로이드(원스토어)'
			]
		},{
			first:'인증번호',
			second:[
				'안드로이드', 'iOS', 'Windows', '안드로이드(원스토어)'
			]
		}
	])
	const [categorySec,setCategorySec]=useState({
		first: '',
		second:[],
	});
	//clickEvent
	const [toggleFirst, setToggleFirst]=useState(false);
	const [toggleSec,setToggleSec]=useState(false); 
	const [selectFirst, setSelectFirst]=useState('');
	const [selectSec, setSelectSec]=useState('');
	const onToggleFirst=()=>setToggleFirst(!toggleFirst);
	const onToggleSec=()=>setToggleSec(!toggleSec);
	const onSelectFirst=(event)=>{
		setSelectFirst(event.target.innerText);
		console.log('첫번째 카테고리',selectFirst)
		console.log(event.target.innerText)
		// const unique=category.filter(c=>c.first === selectFirst);
		// setCategorySec({
		// 	...categorySec,
		// 	first: unique[0].first,
		// 	second: unique[0].second,
		// })
		onToggleFirst();
		//자동으로 두번째꺼 열어줌
		onToggleSec();
	}
	const onSelectSec=(event)=>{
		setSelectSec(event.target.innerText);
		onToggleSec()
	}
	return(
		<div>
			<span onClick={onToggleFirst}>{selectFirst!==""?selectFirst:'카테고리를 선택하세요'}</span>
			<span onClick={onToggleSec}>{selectSec!==""? selectSec:'카테고리를 선택하세요'}</span>
			<div>
				{toggleFirst && category.map(data => (
					<Category 
						key={data.first} 
						data={data.first} 
						onSelect={onSelectFirst}
					/>
				))}
			</div>
			<div>
				{toggleSec && selectFirst && 
					<Category 
						data={categorySec.second} 
						onSelect={onSelectSec}
					/>}
			</div>
		</div>
	);
}
